<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Document</title>
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
          crossorigin="anonymous"></script>
     <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
          integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
          crossorigin="anonymous"></script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
          integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
          crossorigin="anonymous"></script>
</head>
<body>
     <!-- Modal -->
     <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
               <div class="modal-content">
                    <div class="modal-header">
                         <h5 class="modal-title" id="moduletitle">Do you want to Continue?</h5>
                         <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                         <p id="moduleds">You will be redirected to another website.</p>
                    </div>
                    <div class="modal-footer">
                         <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                         <button type="button" class="btn btn-primary" id="loginSubmit">Continue & Login</button>
                    </div>
               </div>
          </div>
     </div>
     <!-- Modal -->
     <div class="modal fade" id="loginModel" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
               <div class="modal-content">
                    <div class="modal-header">
                         <h5 class="modal-title" id="exampleModalLabel">Login</h5>
                         <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                         <form class="row g-3 needs-validation" novalidate>
                              <div class="col-md-13">
                                   <label for="validationCustom02" class="form-label">Email *</label>
                                   <input type="email" class="form-control" id="email" placeholder="Email" required>
                                   <div class="valid-feedback">
                                        This is a valid email!
                                   </div>
                              </div>
                              <div class="col-md-13">
                                   <label for="validationCustom02" class="form-label">Email *</label>
                                   <input type="password" class="form-control" id="password" placeholder="Password"
                                        required>
                                   <div class="valid-feedback">
                                        Password is valid!
                                   </div>
                              </div>
                              <div class="modal-footer">
                                   <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Cancel</button>
                                   <button class="btn btn-primary" id="SubmitLGNData" type="submit">Login</button>
                              </div>
                         </form>
                    </div>
               </div>
          </div>
     </div>
     <br>
     <div class="container-fluid text-center">
          <h3>Login (BETA)</h3>
          <br>
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal"
               id="openSigninPopup">
               <span>Sign in with Google</span>
          </button>
          <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal"
               id="logoutButton">
               <span>Log out</span>
          </button>
          <!-- <button disabled type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#loginModel" id="openSigninAccountPopup">
                    <span>Login with Account</span>
               </button> -->
          <br></br>
          <p>You can either signin with your google account or you can signup with your google account.
               (the app will determine if we have your account on our records or not)</p>
     </div>
     <br>
     <br>
     <br>
     <div class="accordion" id="accordionExample">
          <div class="accordion-item">
               <h2 class="accordion-header" id="headingOne">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse"
                         data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                         Why is Jayden doing this?
                    </button>
               </h2>
               <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
                    data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                         <strong style="font-weight: 600;">I am currently testing a new framework for me called
                              Boostrap.
                    </div>
               </div>
          </div>
          <div class="accordion-item">
               <h2 class="accordion-header" id="headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                         data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                         What will this be used for?
                    </button>
               </h2>
               <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                    data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                         <strong style="font-weight: 600;">I will use this in my future project's to help develop a
                              reliable front-end user experience.
                    </div>
               </div>
          </div>
     </div>
     <br>
     <br>
     <br>
     <div class="container-fluid d-flex justify-content-center align-items-center">
          <p style="font-weight: 600;">Produly coded with love by Jayden John Sham.</p>
     </div>
</body>
<script type="module">
     // Import the functions you need from the SDKs you need
     import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
     import { getAuth, GoogleAuthProvider, signInWithRedirect, getRedirectResult } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";
     import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-analytics.js";
     // TODO: Add SDKs for Firebase products that you want to use
     // https://firebase.google.com/docs/web/setup#available-libraries

     // Your web app's Firebase configuration
     // For Firebase JS SDK v7.20.0 and later, measurementId is optional
     const firebaseConfig = {
          apiKey: "AIzaSyB35w_MWYaa0EiHxqxB-RE0mhOzqSOZskY",
          authDomain: "epicgames-bd75e.firebaseapp.com",
          projectId: "epicgames-bd75e",
          storageBucket: "epicgames-bd75e.appspot.com",
          messagingSenderId: "776327576480",
          appId: "1:776327576480:web:636ae77a01e6f55eba82c5",
          measurementId: "G-B9PD35C31M"
     };

     // Initialize Firebase
     const app = initializeApp(firebaseConfig);
     const auth = getAuth(app);
     const provider = new GoogleAuthProvider(app);
     const analytics = getAnalytics(app);

     loginSubmit.addEventListener('click', (e) => {
          signInWithRedirect(auth, provider);

          getRedirectResult(auth).then((result) => { // This gives you a Google Access Token. You can use it to access Google APIs.
               const credential = GoogleAuthProvider.credentialFromResult(result);
               const token = credential.accessToken;

               // The signed-in user info.
               const user = result.user;
          }).catch((error) => { // Handle Errors here.
               const errorCode = error.code;
               const errorMessage = error.message;
               alert(error.message);
               // The email of the user's account used.
               const email = error.customData.email;
               // The AuthCredential type that was used.
               const credential = GoogleAuthProvider.credentialFromError(error);
               // ...
          });
     });

     auth.onAuthStateChanged(user => {
          if (user) {
               // user is signed in
               const displayName = user.displayName; 
               const moduletitle = document.getElementById('moduletitle');
               const moduleds = document.getElementById('moduleds');
               const logoutButton = document.getElementById('logoutButton');
               const loginSubmit = document.getElementById('loginSubmit');
               const openSigninPopup = document.getElementById('openSigninPopup');
               loginSubmit.style.display = 'none';
               logoutButton.style.display = '';
               moduleds.innerHTML = displayName;
               openSigninPopup.innerHTML = 'Open Module';
               moduletitle.innerHTML = 'Details (Username)'
          } else {
               // no user is signed in
               const loginSubmit = document.getElementById('loginSubmit');
               const logoutButton = document.getElementById('logoutButton');
               logoutButton.style.display = 'none';
               loginSubmit.style.display = '';
          }
     })

     logoutButton.addEventListener('click', (e) => {
          auth.signOut();
          location.reload();
     });

     console.log(firebaseConfig);
</script>
</html>
